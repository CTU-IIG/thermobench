<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Thermobench.jl · Thermobench</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Thermobench</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Thermobench.jl</a><ul class="internal"><li><a class="tocitem" href="#Installation-1"><span>Installation</span></a></li><li><a class="tocitem" href="#Reference-1"><span>Reference</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Thermobench.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Thermobench.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CTU-IIG/thermobench/blob/master/julia/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Thermobench.jl-1"><a class="docs-heading-anchor" href="#Thermobench.jl-1">Thermobench.jl</a><a class="docs-heading-anchor-permalink" href="#Thermobench.jl-1" title="Permalink"></a></h1><p>Julia module for working with <code>thermobench</code>-produced CSV files.</p><h2 id="Installation-1"><a class="docs-heading-anchor" href="#Installation-1">Installation</a><a class="docs-heading-anchor-permalink" href="#Installation-1" title="Permalink"></a></h2><p>Run <code>julia</code> and type:</p><pre><code class="language-julia">]develop /path/to/thermobench/julia</code></pre><h2 id="Reference-1"><a class="docs-heading-anchor" href="#Reference-1">Reference</a><a class="docs-heading-anchor-permalink" href="#Reference-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Thermobench.fit-Tuple{Array{Float64,1},Any}" href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>Thermobench.fit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fit(
    time_s::Vector{Float64},
    data;
    order::Int64 = 2,
    p0 = nothing,
    tau_bounds = [(1, 60*60)],
    k_bounds = [(-120, 120)],
    T_bounds = (0, 120),
    use_cmpfit::Bool = false,
 )</code></pre><p>Fit a thermal model to time series.</p><p>If <code>use_cmpfit</code> is true, use CMPFit.jl package rather than LsqFit.jl. LsqFit doesn&#39;t work well in constrained fit.</p><p>You can limit the values of fitted parameters with <code>*_bounds</code> parameters. Each bound is a tuple of lower and upper limit. <code>T_bounds</code> limits the T∞ parameter. <code>tau_bounds</code> and <code>k_bounds</code> limit the coefficients of exponential functions <span>$k·e^{-t/τ}$</span>. If you specify less tuples than the order of the model, the last limit will be repeated.</p><p><strong>Example</strong></p><pre><code class="language-julia">df = read(&quot;test.csv&quot;)
f = fit(df.time_s, df.CPU_0_temp_°C)
coef(f)
Thermobench.printfit(f)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L208-L239">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.interpolate!-Tuple{DataFrames.AbstractDataFrame}" href="#Thermobench.interpolate!-Tuple{DataFrames.AbstractDataFrame}"><code>Thermobench.interpolate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">interpolate!(df::AbstractDataFrame)</code></pre><p>In-place version of <a href="#Thermobench.interpolate-Tuple{DataFrames.AbstractDataFrame}"><code>interpolate</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.interpolate-Tuple{DataFrames.AbstractDataFrame}" href="#Thermobench.interpolate-Tuple{DataFrames.AbstractDataFrame}"><code>Thermobench.interpolate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">interpolate!(df::AbstractDataFrame)</code></pre><p>Replace missing values with results of linear interpolation performed against the first column (time).</p><pre><code class="language-julia-repl">julia&gt; x = DataFrame(t=[0.0, 1, 2, 3, 1000, 1001], v=[0.0, missing, missing, missing, 1000.0, missing])
6×2 DataFrame
│ Row │ t       │ v        │
│     │ Float64 │ Float64? │
├─────┼─────────┼──────────┤
│ 1   │ 0.0     │ 0.0      │
│ 2   │ 1.0     │ missing  │
│ 3   │ 2.0     │ missing  │
│ 4   │ 3.0     │ missing  │
│ 5   │ 1000.0  │ 1000.0   │
│ 6   │ 1001.0  │ missing  │

julia&gt; interpolate(x)
6×2 DataFrame
│ Row │ t       │ v        │
│     │ Float64 │ Float64? │
├─────┼─────────┼──────────┤
│ 1   │ 0.0     │ 0.0      │
│ 2   │ 1.0     │ 1.0      │
│ 3   │ 2.0     │ 2.0      │
│ 4   │ 3.0     │ 3.0      │
│ 5   │ 1000.0  │ 1000.0   │
│ 6   │ 1001.0  │ missing  │
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L90-L122">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.multi_fit" href="#Thermobench.multi_fit"><code>Thermobench.multi_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">multi_fit(sources, columns = :CPU_0_temp_°C;
          timecol = :time_s,
          use_measurements = false,
          order::Int64 = 2,
          subtract = nothing,
          kwargs...)::MultiFit</code></pre><p>Call <code>fit()</code> for all sources and report the results (coefficients etc.) in <code>DataFrame</code>. When <code>use_measurements</code> is <code>true</code>, report coefficients with their confidence intervals as <code>Measurement</code> objects.</p><p><code>subtract</code> specifies the column (symbol), which is subtracted from data after interpolating its values with <a href="#Thermobench.interpolate-Tuple{DataFrames.AbstractDataFrame}"><code>interpolate</code></a>. This intended for subtraction of ambient temperature.</p><pre><code class="language-julia-repl">julia&gt; multi_fit(&quot;test.csv&quot;, [:CPU_0_temp_°C :CPU_1_temp_°C])
Prefix: test.csv
2×8 DataFrame
│ Row │ name   │ column        │ mse       │ Tinf    │ k1       │ tau1    │ k2       │ tau2    │
│     │ String │ Symbol        │ Float64   │ Float64 │ Float64  │ Float64 │ Float64  │ Float64 │
├─────┼────────┼───────────────┼───────────┼─────────┼──────────┼─────────┼──────────┼─────────┤
│ 1   │        │ CPU_0_temp_°C │ 0.023865  │ 53.0003 │ -8.1627  │ 59.366  │ -13.1247 │ 317.63  │
│ 2   │        │ CPU_1_temp_°C │ 0.0208397 │ 54.0527 │ -7.17072 │ 51.1449 │ -14.3006 │ 277.687 │</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L390-L417">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot_fit" href="#Thermobench.plot_fit"><code>Thermobench.plot_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">plot_fit(sources, columns = :CPU_0_temp_°C;
         timecol = :time_s,
         kwargs...)</code></pre><p>Call <a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>fit</code></a> for all <code>sources</code> and <code>columns</code> and produce a graph using gnuplot.</p><p><code>sources</code> can be a file name (<code>String</code>) or a <code>DataFrame</code> or an array of these.</p><p><code>timecol</code> is the columns with time of measurement.</p><p>Setting <code>plotexp</code> to <code>true</code> causes the individual fitted exponentials to be plotted in addition to the compete fitted function.</p><p>Other <code>kwargs</code> are passed to <a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>fit</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia">plot_fit(
    [&quot;file$i.csv&quot; for i in 1:3],
    [:CPU_0_temp_°C, :GPU_0_temp_°C],
    order = 2
)</code></pre><pre><code class="language-julia-repl">julia&gt; plot_fit(&quot;test.csv&quot;, [:CPU_0_temp_°C :CPU_1_temp_°C])
rss(fit) = 16.824847736915736
rss(fit) = 14.692012083459852
LsqFit.LsqFitResult{Array{Float64,1},Array{Float64,1},Array{Float64,2},Array{Float64,1}}([54.05270193617456, -14.300579425822987, 277.6871572171704, -7.170707187492722, 51.1449427363974], [0.4814153228588438, 0.48210393166134935, -0.02827469472873645, 0.1590733915246858, -0.25639810428151577, -0.2745094012142104, -0.29552833686121005, -0.3190430919820457, 0.054645980053877, -0.1740621999878087  …  -0.10112334959897851, -0.09697970488952024, -0.09284269210126439, 0.11127121083011815, 0.11537443369089573, 0.11946698541304812, -0.0764592578095602, -0.07240014726207278, 0.1316443697488907, -0.26432565427360544], [1.0 1.0 … 1.0 -0.0; 1.0 0.9999870640586986 … 0.9999297674088051 -9.84651920490284e-6; … ; 1.0 0.07839196015996269 … 9.920656343511463e-7 -1.9227241374458278e-6; 1.0 0.07811016470837553 … 9.728568932023543e-7 -1.8881625354797446e-6], true, Float64[])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L503-L536">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.printfit-Tuple{Any}" href="#Thermobench.printfit-Tuple{Any}"><code>Thermobench.printfit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">printfit(fit; minutes = false)</code></pre><p>Return the fitted function as Gnuplot enhanced string. Time constants (τᵢ) are sorted from smallest to largest.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L180-L185">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.@symarray-Tuple" href="#Thermobench.@symarray-Tuple"><code>Thermobench.@symarray</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Construct array of symbols from arguments.</p><p>Useful for constructing column names, e.g.,</p><pre><code class="language-julia">@symarray Cortex_A57_temp_°C Denver2_temp_°C</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L492-L499">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.normalize_units!-Tuple{DataFrames.AbstractDataFrame}" href="#Thermobench.normalize_units!-Tuple{DataFrames.AbstractDataFrame}"><code>Thermobench.normalize_units!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Normalize units to seconds and °C</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.read-Tuple{Any}" href="#Thermobench.read-Tuple{Any}"><code>Thermobench.read</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">read(source; normalizeunits=true)</code></pre><p>Read thermobech CSV file, optionally normalizing units and return it as DataFrame&quot;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L41-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.thermocam_correct!-Tuple{DataFrames.AbstractDataFrame}" href="#Thermobench.thermocam_correct!-Tuple{DataFrames.AbstractDataFrame}"><code>Thermobench.thermocam_correct!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">thermocam_correct!(df::AbstractDataFrame)</code></pre><p>Estimate correction for thermocamera temperatures and apply it. Return the correction coefficients.</p><p>Correction is calculated from <code>CPU_0_temp_°C</code> and <code>cam_cpu</code> columns. This and the names of modified columns are currently hard coded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/cacdc011a40adff13efcbc79f61b43d63ab03e3e/julia/src/Thermobench.jl#L129-L137">source</a></section></article></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 4 June 2020 20:36">Thursday 4 June 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
