<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Thermobench.jl · Thermobench</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Thermobench</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Thermobench.jl</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li><a class="tocitem" href="#Reference"><span>Reference</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Thermobench.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Thermobench.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CTU-IIG/thermobench/blob/master/julia/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Thermobench.jl"><a class="docs-heading-anchor" href="#Thermobench.jl">Thermobench.jl</a><a id="Thermobench.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Thermobench.jl" title="Permalink"></a></h1><p>Julia module for working with <a href="https://github.com/CTU-IIG/thermobench">thermobench</a>-produced CSV files.</p><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#Thermobench.jl">Thermobench.jl</a></li><ul><li><a href="#Contents">Contents</a></li><li><a href="#Installation">Installation</a></li><li><a href="#Usage">Usage</a></li><ul><li><a href="#High-level-data-processing-and-graphing">High-level data processing and graphing</a></li><li><a href="#Raw-thermobench-data">Raw thermobench data</a></li><ul><li><a href="#Plotting">Plotting</a></li><li><a href="#Missing-values-and-interpolation">Missing values and interpolation</a></li><li><a href="#Other-useful-data-manipulations">Other useful data manipulations</a></li></ul></ul><li><a href="#Reference">Reference</a></li></ul></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Thermobench.jl can be installed using the Julia package manager. From the Julia REPL, type <code>]</code> to enter the Pkg REPL mode and run:</p><pre><code class="language-none">pkg&gt; develop /path/to/thermobench/julia</code></pre><p>Alternatively, if you want to use the same versions of packages as the author of the package, run:</p><pre><code class="language-none">(@v1.4) pkg&gt; activate /path/to/thermobench/julia
(Thermobench) pkg&gt; instantiate</code></pre><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>Thermobench package supports plotting with <a href="https://github.com/gcalderone/Gnuplot.jl">Gnuplot.jl</a> package so you will most likely need both packages:</p><pre><code class="language-julia">using Thermobench, Gnuplot</code></pre><p>You can also create a shortcut <code>T</code> for accessing non-exported members of Thermobench package.</p><pre><code class="language-julia">const T = Thermobench</code></pre><h3 id="High-level-data-processing-and-graphing"><a class="docs-heading-anchor" href="#High-level-data-processing-and-graphing">High-level data processing and graphing</a><a id="High-level-data-processing-and-graphing-1"></a><a class="docs-heading-anchor-permalink" href="#High-level-data-processing-and-graphing" title="Permalink"></a></h3><p>The simplest way to using the package is the <a href="#Thermobench.multi_fit"><code>multi_fit</code></a> function. In the example below, it reads the data from a CSV file and fits a thermal model to it. The result can be directly plotted by Gnuplot.jl:</p><pre><code class="language-julia-repl">julia&gt; @gp multi_fit(&quot;test1.csv&quot;)</code></pre><p><img src="assets/test-mf.png" alt/></p><p>You can pass multiple CSV files to <a href="#Thermobench.multi_fit"><code>multi_fit</code></a>. The result is shown as a DataFrame, which makes it easy to compare the results. You can also specify additional keywords to control the operation. Below we use <code>subtract</code> to subtract ambient temperature from the data to fit, <code>use_measurements</code> to produce results with confidence intervals and <code>use_cmpfit</code> to use alternative fitting solver.</p><pre><code class="language-julia-repl">julia&gt; mf = multi_fit([&quot;test1.csv&quot;, &quot;test2.csv&quot;], subtract=:ambient, use_cmpfit=true, use_measurements=true)
Thermobench.MultiFit: test
    2×9 DataFrame
 Row │ name       column      rmse      ops              Tinf        k1        ⋯
     │ String     Symbol      Float64   Measurem…        Measurem…   Measurem… ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ test1.csv  CPU_0_temp  0.283474  0.046519±7.6e-5  28.24±0.1   -6.57±0.5 ⋯
   2 │ test2.csv  CPU_0_temp  0.285696  0.0938±0.00014   30.65±0.14  -8.46±0.5
                                                               4 columns omitted

julia&gt; @gp mf</code></pre><p><img src="assets/test-mf2.png" alt/></p><p>In most cases, we are interested only in <span>$T_∞$</span> parameters. These can be plot (and compared between multiple data sets) with <a href="#Thermobench.plot_Tinf-Union{Tuple{Vararg{Thermobench.MultiFit,N}}, Tuple{N}} where N"><code>plot_Tinf</code></a>.</p><pre><code class="language-julia-repl">julia&gt; mf2 = multi_fit([&quot;test1.csv&quot;, &quot;test2.csv&quot;], :CPU_1_temp, name=&quot;CPU1&quot;, subtract=:ambient, use_cmpfit=true, use_measurements=true)
Thermobench.MultiFit: CPU1
    2×9 DataFrame
 Row │ name       column      rmse      ops              Tinf        k1        ⋯
     │ String     Symbol      Float64   Measurem…        Measurem…   Measurem… ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ test1.csv  CPU_1_temp  0.286691  0.046519±7.6e-5  29.25±0.12  -7.4±0.59 ⋯
   2 │ test2.csv  CPU_1_temp  0.289158  0.0938±0.00014   31.7±0.16   -8.62±0.5
                                                               4 columns omitted

julia&gt; @gp plot_Tinf(rename!(mf, &quot;CPU0&quot;), mf2) key=&quot;left&quot;</code></pre><p><img src="assets/tinf.png" alt/></p><p>Both <span>$T_∞$</span> and benchmark performance can be plotted with <a href="#Thermobench.plot_Tinf_and_ops-Union{Tuple{Thermobench.MultiFit}, Tuple{N}} where N"><code>plot_Tinf_and_ops</code></a>:</p><pre><code class="language-julia-repl">julia&gt; @gp plot_Tinf_and_ops(mf2) key=&quot;left&quot;</code></pre><p><img src="assets/tinf-ops.png" alt/></p><h3 id="Raw-thermobench-data"><a class="docs-heading-anchor" href="#Raw-thermobench-data">Raw thermobench data</a><a id="Raw-thermobench-data-1"></a><a class="docs-heading-anchor-permalink" href="#Raw-thermobench-data" title="Permalink"></a></h3><p>To access raw data from thermobench CSV files, use the <a href="#Thermobench.read-Tuple{Any}"><code>Thermobench.read</code></a> function:</p><pre><code class="language-julia-repl">julia&gt; using DataFrames

julia&gt; d = T.read(&quot;test1.csv&quot;);

julia&gt; dump(d, maxdepth=1)
Thermobench.Data
  df: DataFrame
  name: String &quot;test1.csv&quot;
  meta: Dict{Any,Any}

julia&gt; first(d.df, 6)
6×30 DataFrame
 Row │ time        CPU_0_temp  CPU_1_temp  GPU_0_temp  GPU_1_temp  DRC_temp    ⋯
     │ Float64     Float64?    Float64?    Float64?    Float64?    Float64?    ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ 5.2376e-5         39.7        40.5        40.5        40.5       39.9   ⋯
   2 │ 0.00298869        39.7        40.5        40.5        40.5       39.9
   3 │ 0.112669     missing     missing     missing     missing    missing
   4 │ 1.00012           40.1        40.7        40.1        40.1       40.3
   5 │ 2.00109           39.7        40.7        39.7        39.7       40.3   ⋯
   6 │ 2.16951      missing     missing     missing     missing    missing
                                                              24 columns omitted</code></pre><p>In the example above, the data is available in <code>d.df</code> DataFrame, where you can manipulate them as you want. You can find a lot of examples in <a href="https://dataframes.juliadata.org/stable/">DataFrames.jl documentation</a>.</p><h4 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h4><p>You can plot the data by using directly the values from DataFrame <code>d.df</code>, but the <a href="#Thermobench.plot"><code>plot(::Thermobench.Data)</code></a> method makes it easier:</p><pre><code class="language-julia">@gp    plot(d, :CPU_0_temp) key=&quot;left&quot;
@gp :- plot(d, :ambient, with=&quot;lines&quot;, title=&quot;Amb. temperature&quot;)</code></pre><p><img src="assets/raw-cpu.png" alt/></p><h4 id="Missing-values-and-interpolation"><a class="docs-heading-anchor" href="#Missing-values-and-interpolation">Missing values and interpolation</a><a id="Missing-values-and-interpolation-1"></a><a class="docs-heading-anchor-permalink" href="#Missing-values-and-interpolation" title="Permalink"></a></h4><p>If you want to get rid of missing data, you can select interesting columns and pass the dataframe through <a href="https://dataframes.juliadata.org/stable/lib/functions/#DataFrames.dropmissing"><code>dropmissing</code></a>:</p><pre><code class="language-julia-repl">julia&gt; select(d.df, [:time, :CPU_0_temp]) |&gt; dropmissing
878×2 DataFrame
 Row │ time          CPU_0_temp
     │ Float64       Float64
─────┼──────────────────────────
   1 │   5.2376e-5         39.7
   2 │   0.00298869        39.7
   3 │   1.00012           40.1
   4 │   2.00109           39.7
   5 │   3.00061           40.5
   6 │   4.00057           40.3
   7 │   5.00051           40.1
   8 │   6.00049           40.5
  ⋮  │      ⋮            ⋮
 872 │ 870.0               52.5
 873 │ 871.001             52.5
 874 │ 872.001             52.6
 875 │ 873.001             52.5
 876 │ 874.001             52.5
 877 │ 875.001             52.6
 878 │ 876.0               52.5
                863 rows omitted</code></pre><p>which is the same as:</p><pre><code class="language-julia-repl">julia&gt; dropmissing(select(d.df, [:time, :CPU_0_temp]));</code></pre><p>or</p><pre><code class="language-julia-repl">julia&gt; using Pipe: @pipe

julia&gt; @pipe d.df |&gt; select(_, [:time, :CPU_0_temp]) |&gt; dropmissing(_);</code></pre><p>Note that when you select all columns, you will likely end up with empty dataframe, because <code>dropmissing</code> keeps only rows with <strong>no</strong> missing values.</p><p>Alternatively, you can get rid of missing data by interpolating them with <a href="#Thermobench.interpolate-Tuple{AbstractDataFrame}"><code>interpolate</code></a>:</p><pre><code class="language-julia-repl">julia&gt; interpolate(d.df)
1092×30 DataFrame
  Row │ time          CPU_0_temp  CPU_1_temp  GPU_0_temp  GPU_1_temp  DRC_temp ⋯
      │ Float64       Float64?    Float64?    Float64?    Float64?    Float64? ⋯
──────┼─────────────────────────────────────────────────────────────────────────
    1 │   5.2376e-5      39.7        40.5        40.5        40.5       39.9   ⋯
    2 │   0.00298869     39.7        40.5        40.5        40.5       39.9
    3 │   0.112669       39.744      40.522      40.456      40.456     39.944
    4 │   1.00012        40.1        40.7        40.1        40.1       40.3
    5 │   2.00109        39.7        40.7        39.7        39.7       40.3   ⋯
    6 │   2.16951        39.8348     40.7674     39.8348     39.8348    40.3
    7 │   3.00061        40.5        41.1        40.5        40.5       40.3
    8 │   4.00057        40.3        40.7        40.3        40.3       40.5
  ⋮   │      ⋮            ⋮           ⋮           ⋮           ⋮          ⋮     ⋱
 1086 │ 870.851          52.5        53.43       52.5        52.5       52.1   ⋯
 1087 │ 871.001          52.5        53.4        52.5        52.5       52.1
 1088 │ 872.001          52.6        53.6        52.6        52.6       52.1
 1089 │ 873.001          52.5        53.4        52.5        52.5       52.1
 1090 │ 874.001          52.5        53.4        52.5        52.5       52.1   ⋯
 1091 │ 875.001          52.6        53.4        52.6        52.6       52.1
 1092 │ 876.0            52.5        53.2        52.5        52.5       52.1
                                                24 columns and 1077 rows omitted</code></pre><h4 id="Other-useful-data-manipulations"><a class="docs-heading-anchor" href="#Other-useful-data-manipulations">Other useful data manipulations</a><a id="Other-useful-data-manipulations-1"></a><a class="docs-heading-anchor-permalink" href="#Other-useful-data-manipulations" title="Permalink"></a></h4><p>To filter out some rows, you can use:</p><pre><code class="language-julia-repl">julia&gt; using DataFramesMeta

julia&gt; @linq d.df |&gt; where(10.0 .&lt; :time .&lt; 13.0)
5×30 DataFrame
 Row │ time     CPU_0_temp  CPU_1_temp  GPU_0_temp  GPU_1_temp  DRC_temp   PMI ⋯
     │ Float64  Float64?    Float64?    Float64?    Float64?    Float64?   Flo ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ 10.0003        40.9        41.7        40.9        40.9       41.1      ⋯
   2 │ 10.2866   missing     missing     missing     missing    missing    mis
   3 │ 11.0007        40.9        41.7        40.9        40.9       41.3
   4 │ 12.0006        41.1        41.9        41.1        41.1       41.1
   5 │ 12.25     missing     missing     missing     missing    missing    mis ⋯
                                                              24 columns omitted</code></pre><h2 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h2><ul><li><a href="#Thermobench.Data"><code>Thermobench.Data</code></a></li><li><a href="#Thermobench.Data-Tuple{Thermobench.Data,AbstractDataFrame}"><code>Thermobench.Data</code></a></li><li><a href="#Thermobench.MultiFit"><code>Thermobench.MultiFit</code></a></li><li><a href="#DataFrames.rename!-Tuple{Thermobench.MultiFit,Any}"><code>DataFrames.rename!</code></a></li><li><a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>Thermobench.fit</code></a></li><li><a href="#Thermobench.interpolate-Tuple{AbstractDataFrame}"><code>Thermobench.interpolate</code></a></li><li><a href="#Thermobench.interpolate!-Tuple{AbstractDataFrame}"><code>Thermobench.interpolate!</code></a></li><li><a href="#Thermobench.multi_fit"><code>Thermobench.multi_fit</code></a></li><li><a href="#Thermobench.normalize_units!-Tuple{Thermobench.Data}"><code>Thermobench.normalize_units!</code></a></li><li><a href="#Thermobench.ops_est"><code>Thermobench.ops_est</code></a></li><li><a href="#Thermobench.ops_per_sec"><code>Thermobench.ops_per_sec</code></a></li><li><a href="#Thermobench.plot-Tuple{Thermobench.MultiFit}"><code>Thermobench.plot</code></a></li><li><a href="#Thermobench.plot"><code>Thermobench.plot</code></a></li><li><a href="#Thermobench.plot"><code>Thermobench.plot</code></a></li><li><a href="#Thermobench.plot_Tinf-Union{Tuple{Vararg{Thermobench.MultiFit,N}}, Tuple{N}} where N"><code>Thermobench.plot_Tinf</code></a></li><li><a href="#Thermobench.plot_Tinf_and_ops-Union{Tuple{Thermobench.MultiFit}, Tuple{N}} where N"><code>Thermobench.plot_Tinf_and_ops</code></a></li><li><a href="#Thermobench.plot_bars-Tuple{AbstractDataFrame}"><code>Thermobench.plot_bars</code></a></li><li><a href="#Thermobench.plot_fit"><code>Thermobench.plot_fit</code></a></li><li><a href="#Thermobench.printfit-Tuple{Any}"><code>Thermobench.printfit</code></a></li><li><a href="#Thermobench.read-Tuple{Any}"><code>Thermobench.read</code></a></li><li><a href="#Thermobench.sample_mean_est-Tuple{Any}"><code>Thermobench.sample_mean_est</code></a></li><li><a href="#Thermobench.strip_units!-Tuple{Thermobench.Data}"><code>Thermobench.strip_units!</code></a></li><li><a href="#Thermobench.thermocam_correct!-Tuple{Thermobench.Data}"><code>Thermobench.thermocam_correct!</code></a></li><li><a href="#Thermobench.@symarray-Tuple"><code>Thermobench.@symarray</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Thermobench.Data" href="#Thermobench.Data"><code>Thermobench.Data</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">mutable struct Data
    df::DataFrame
    name::String                # label for plotting
    meta::Dict
end</code></pre><p>Data read from thermobench CSV file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L33-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.Data-Tuple{Thermobench.Data,AbstractDataFrame}" href="#Thermobench.Data-Tuple{Thermobench.Data,AbstractDataFrame}"><code>Thermobench.Data</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Copy existing Data <code>d</code>, but replace the DataFrame with <code>df</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.MultiFit" href="#Thermobench.MultiFit"><code>Thermobench.MultiFit</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Stores results of processing of one or more thermobench CSV files.</p><p>The main data is stored in the <code>result</code> field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L604-L607">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.rename!-Tuple{Thermobench.MultiFit,Any}" href="#DataFrames.rename!-Tuple{Thermobench.MultiFit,Any}"><code>DataFrames.rename!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">rename!(mf::MultiFit, name)</code></pre><p>Rename <code>MultiFit</code> data structure.</p><p>The name is often used as graph label so renaming can be used to set descriptive graph labels.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L619-L626">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.fit-Tuple{Array{Float64,1},Any}" href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>Thermobench.fit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fit(
    time_s::Vector{Float64},
    data::Vector{Float64};
    order::Int64 = 2,
    p0 = nothing,
    tau_bounds = [(1, 60*60)],
    k_bounds = [(-120, 120)],
    T_bounds = (0, 120),
    use_cmpfit::Bool = false,
 )</code></pre><p>Fit a thermal model to time series given by <code>time_s</code> and <code>data</code>. The thermal model has the form of</p><p class="math-container">\[T(t) = T_∞ + \sum_{i=1}^{order}k_i⋅e^{-\frac{t}{τ_i}},\]</p><p>where T_∞, kᵢ and τᵢ are the coefficients found by this function.</p><p>If <code>use_cmpfit</code> is true, use CMPFit.jl package rather than LsqFit.jl. LsqFit doesn&#39;t work well in constrained settings.</p><p>You can limit the values of fitted parameters with <code>*_bounds</code> parameters. Each bound is a tuple of lower and upper limit. <code>T_bounds</code> limits the T∞ parameter. <code>tau_bounds</code> and <code>k_bounds</code> limit the coefficients of exponential functions <span>$k·e^{-t/τ}$</span>. If you specify less tuples than the order of the model, the last limit will be repeated.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; using StatsBase: coef

julia&gt; d = Thermobench.read(&quot;test.csv&quot;);


julia&gt; f = fit(d.df.time, d.df.CPU_0_temp);


julia&gt; round.(coef(f), digits=6)
5-element Array{Float64,1}:
  53.000281
 -13.124669
 317.629562
  -8.162699
  59.36604

julia&gt; printfit(f)
&quot;53.0 – 8.2⋅e^{−t/59.4} – 13.1⋅e^{−t/317.6}&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L445-L495">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.interpolate!-Tuple{AbstractDataFrame}" href="#Thermobench.interpolate!-Tuple{AbstractDataFrame}"><code>Thermobench.interpolate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">interpolate!(df::AbstractDataFrame)</code></pre><p>In-place version of <a href="#Thermobench.interpolate-Tuple{AbstractDataFrame}"><code>interpolate</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L282-L286">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.interpolate-Tuple{AbstractDataFrame}" href="#Thermobench.interpolate-Tuple{AbstractDataFrame}"><code>Thermobench.interpolate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">interpolate!(df::AbstractDataFrame)</code></pre><p>Replace missing values with results of linear interpolation performed against the first column (time).</p><pre><code class="language-julia-repl">julia&gt; x = DataFrame(t=[0.0, 1, 2, 3, 1000, 1001], v=[0.0, missing, missing, missing, 1000.0, missing])
6×2 DataFrame
 Row │ t        v
     │ Float64  Float64?
─────┼────────────────────
   1 │     0.0        0.0
   2 │     1.0  missing
   3 │     2.0  missing
   4 │     3.0  missing
   5 │  1000.0     1000.0
   6 │  1001.0  missing

julia&gt; interpolate(x)
6×2 DataFrame
 Row │ t        v
     │ Float64  Float64?
─────┼────────────────────
   1 │     0.0        0.0
   2 │     1.0        1.0
   3 │     2.0        2.0
   4 │     3.0        3.0
   5 │  1000.0     1000.0
   6 │  1001.0  missing
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L314-L346">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.multi_fit" href="#Thermobench.multi_fit"><code>Thermobench.multi_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">multi_fit(sources, columns = :CPU_0_temp;
          name = nothing,
          timecol = :time,
          use_measurements = false,
          order::Int64 = 2,
          subtract = nothing,
          kwargs...)::MultiFit</code></pre><p>Call <a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>fit()</code></a> for all sources and report the results (coefficients etc.) in <code>DataFrame</code>. When <code>use_measurements</code> is <code>true</code>, report coefficients with their confidence intervals as <code>Measurement</code> objects.</p><p><code>subtract</code> specifies the column (symbol), which is subtracted from data after interpolating its values with <a href="#Thermobench.interpolate-Tuple{AbstractDataFrame}"><code>interpolate</code></a>. This intended for subtraction of ambient temperature.</p><pre><code class="language-julia-repl">julia&gt; multi_fit(&quot;test.csv&quot;, [:CPU_0_temp :CPU_1_temp])
Thermobench.MultiFit: test.csv
    2×9 DataFrame
 Row │ name      column      rmse      ops                Tinf     k1        t ⋯
     │ String    Symbol      Float64   Measurem…          Float64  Float64   F ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ test.csv  CPU_0_temp  0.154483  3.9364e8±280000.0  53.0003  -8.1627   5 ⋯
   2 │ test.csv  CPU_1_temp  0.14436   3.9364e8±280000.0  54.0527  -7.17072  5
                                                               3 columns omitted</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L875-L904">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.normalize_units!-Tuple{Thermobench.Data}" href="#Thermobench.normalize_units!-Tuple{Thermobench.Data}"><code>Thermobench.normalize_units!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">normalize_units!(d::Data)</code></pre><p>Normalize units to seconds and °C.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L171-L175">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.ops_est" href="#Thermobench.ops_est"><code>Thermobench.ops_est</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ops_est(d::Data, col_idx = r&quot;work_done&quot;)::Measurement</code></pre><p>Return sum of operations per second estimations calculated from multiple <em>work_done</em> columns. This is most often used for calculating &quot;performance&quot; of all CPUs together. The result is obtained by combining <a href="#Thermobench.sample_mean_est-Tuple{Any}"><code>sample_mean_est</code></a> and <a href="#Thermobench.ops_per_sec"><code>ops_per_sec</code></a> for all matching columns.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; ops_est(Thermobench.read(&quot;test.csv&quot;))
3.9364e8 ± 280000.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L150-L164">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.ops_per_sec" href="#Thermobench.ops_per_sec"><code>Thermobench.ops_per_sec</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ops_per_sec(d::Data, column = :work_done)::Vector{Float64}</code></pre><p>Return a vector of operations per second calculated by combining information from <em>time</em> and <em>work_done</em>-type column identified with <code>column</code>.</p><pre><code class="language-julia-repl">julia&gt; ops_per_sec(Thermobench.read(&quot;test.csv&quot;), :CPU0_work_done) |&gt; ops-&gt;ops[1:3]
3-element Array{Float64,1}:
 5.499226671249357e7
 5.498016096730722e7
 5.4862923057965025e7</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L111-L125">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot" href="#Thermobench.plot"><code>Thermobench.plot</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Plot various Thermobench data types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot" href="#Thermobench.plot"><code>Thermobench.plot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">plot(d::Data, columns = :CPU_0_temp; kwargs...)</code></pre><p>Plot raw values from Thermobench .csv file stored in <code>d</code>. data.</p><p><strong>Arguments</strong></p><ul><li><code>columns</code>: Column or array of columns to plot (columns are specified as <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/#Symbols">Julia symbols</a>)</li><li><code>with</code>: Gnuplot&#39;s &quot;with&quot; value – chooses how the data is plot. Defaults to <code>&quot;points&quot;</code>.</li><li><code>title</code>: Custom title for all plotted columns. Default title is column title of each plot column.</li><li><code>enhanced</code>: Use Gnuplot enhanced markup for <code>title</code>. Default is <code>false</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L79-L92">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot-Tuple{Thermobench.MultiFit}" href="#Thermobench.plot-Tuple{Thermobench.MultiFit}"><code>Thermobench.plot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot(mf::MultiFit; kwargs...)::Vector{Gnuplot.PlotElement}</code></pre><p>Plot MultiFit data.</p><p><strong>Arguments</strong></p><ul><li><code>minutes::Bool=true</code>: chooses between seconds and minutes on the x-axis.</li><li><code>pt_titles::Bool=true</code> whether to include titles of measured data points in separate legend column.</li><li><code>pt_decim::Int=1</code> draw only every <code>pt_decim</code>-th measured data point. This can be used to reduce the size of vector image formats.</li><li><code>pt_size::Real=1</code> size of measured data points.</li><li><code>pt_saturation::Real=0.4</code> intensity of points (0 is white, 1 is saturate)</li><li><code>stddev::Bool=true</code> whether to include root-mean-square error of the fit in the legend (as (±xxx)).</li><li><code>models::Bool=true</code> whether show thermal model expressions in the key.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L631-L649">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot_Tinf-Union{Tuple{Vararg{Thermobench.MultiFit,N}}, Tuple{N}} where N" href="#Thermobench.plot_Tinf-Union{Tuple{Vararg{Thermobench.MultiFit,N}}, Tuple{N}} where N"><code>Thermobench.plot_Tinf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot_Tinf(mfs::MultiFit...; kwargs...)::Vector{Gnuplot.PlotElement}</code></pre><p>Plot <span>$T_∞$</span> as bargraphs. Multiple data sets can be passed as arguments to compare them. <code>kwargs</code> are passed to <a href="#Thermobench.plot_bars-Tuple{AbstractDataFrame}"><code>Thermobench.plot_bars</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L826-L832">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot_Tinf_and_ops-Union{Tuple{Thermobench.MultiFit}, Tuple{N}} where N" href="#Thermobench.plot_Tinf_and_ops-Union{Tuple{Thermobench.MultiFit}, Tuple{N}} where N"><code>Thermobench.plot_Tinf_and_ops</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot_Tinf_and_ops(mf::MultiFit; kwargs...)::Vector{Gnuplot.PlotElement}</code></pre><p>Plot <span>$T_∞$</span> and performance (ops per second from <a href="#Thermobench.ops_est"><code>ops_est</code></a>) as a bargraph.</p><p><strong>Arguments</strong></p><ul><li><code>perf_str</code>: Title to show for the performance legend and y-axis. Default is &quot;Performance&quot;.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L850-L859">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot_bars-Tuple{AbstractDataFrame}" href="#Thermobench.plot_bars-Tuple{AbstractDataFrame}"><code>Thermobench.plot_bars</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot_bars(df::AbstractDataFrame; kwargs...)::Vector{Gnuplot.PlotElement}</code></pre><p>Generic helper function to plot bar graphs with Gnuplot.jl.</p><p><strong>Arguments</strong></p><ul><li><code>df</code>: data to plot. The first column should contains text labels, the other columns the ploted values. If the values are of <code>Measurement</code> type, they will be plotted with errorbars style, unless overridden with <code>hist_style</code>.</li><li><code>box_width=0.8</code>: the width of the boxes. One means that the boxes touch each other.</li><li><code>gap::Union{Int64,Nothing}=nothing</code>: The gap between bar clusters. If <code>nothing</code>, it is set automatically depending on the number of bars in the cluster; to zero for one bar in the cluster, to 1 for multiple bars.</li><li><code>hist_style=nothing</code>: histogram style — see Gnuplot documentation.</li><li><code>fill_style=&quot;solid 1 border -1&quot;</code>: fill style — see Gnuplot documentation.</li><li><code>errorbars=&quot;&quot;</code>: errorbars style — see Gnuplot documentation.</li><li><code>label_rot=-30</code>: label rotation angle; if &gt; 0, align label to right.</li><li><code>label_enhanced=false</code>: whether to apply Gnuplot enhanced formatting to labels.</li><li><code>key_enhanced=false</code>: whether to apply Gnuplot enhanced formatting to data keys.</li><li><code>y2cols=[]</code>: Columns (specified as symbols) which should be plot against <em>y2</em> axis.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; using Measurements, Gnuplot

julia&gt; df = DataFrame(names=[&quot;very long label&quot;, &quot;b&quot;, &quot;c&quot;],
                      temp=10:12,
                      speed=collect(4:-1:2) .± 1)
3×3 DataFrame
 Row │ names            temp   speed
     │ String           Int64  Measurem…
─────┼───────────────────────────────────
   1 │ very long label     10    4.0±1.0
   2 │ b                   11    3.0±1.0
   3 │ c                   12    2.0±1.0

julia&gt; @gp Thermobench.plot_bars(df)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L710-L755">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.plot_fit" href="#Thermobench.plot_fit"><code>Thermobench.plot_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">plot_fit(sources, columns = :CPU_0_temp;
         timecol = :time,
         kwargs...)</code></pre><p>Call <a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>fit</code></a> for all <code>sources</code> and <code>columns</code> and produce a graph using gnuplot.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function is now superseded by <a href="#Thermobench.multi_fit"><code>multi_fit</code></a>, which offers more possibilities for plotting the data.</p></div></div><p><code>sources</code> can be a file name (<code>String</code>) or a <code>DataFrame</code> or an array of these.</p><p><code>timecol</code> is the columns with time of measurement.</p><p>Setting <code>plotexp</code> to <code>true</code> causes the individual fitted exponentials to be plotted in addition to the compete fitted function.</p><p>Other <code>kwargs</code> are passed to <a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>fit</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; plot_fit(&quot;test.csv&quot;, [:CPU_0_temp :CPU_1_temp], order=2);

</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L996-L1025">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.printfit-Tuple{Any}" href="#Thermobench.printfit-Tuple{Any}"><code>Thermobench.printfit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">printfit(fit; minutes = false)</code></pre><p>Return the fitted function (result of <a href="#Thermobench.fit-Tuple{Array{Float64,1},Any}"><code>fit</code></a>) as Gnuplot enhanced string. Time constants (τᵢ) are sorted from smallest to largest.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; f = Thermobench.fit(collect(0.0:10:50.0), [0, 6, 6.5, 6.8, 7, 7]);

julia&gt; printfit(f)
&quot;7.1 – 4.0⋅e^{−t/1.0} – 3.1⋅e^{−t/11.8}&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L404-L418">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.read-Tuple{Any}" href="#Thermobench.read-Tuple{Any}"><code>Thermobench.read</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">read(source; normalizeunits=true, stripunits=true, name=nothing, kwargs...)::Data</code></pre><p>Read thermobech CSV file <code>source</code> and return it as <a href="#Thermobench.Data"><code>Thermobench.Data</code></a>.</p><p>The <code>source</code> can be a file name or an IO stream. By default units are normalized with <a href="#Thermobench.normalize_units!-Tuple{Thermobench.Data}"><code>normalize_units!</code></a> and stripped from column names with <a href="#Thermobench.strip_units!-Tuple{Thermobench.Data}"><code>strip_units!</code></a>. <code>name</code> is stored in the resulting data structure and often serves as a graph label. It <code>name</code> is not specified it is set (if possible) to the basename of the CSV file. <code>kwargs</code> are stored in the resulting structure as metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L224-L236">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.sample_mean_est-Tuple{Any}" href="#Thermobench.sample_mean_est-Tuple{Any}"><code>Thermobench.sample_mean_est</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">sample_mean_est(sample; alpha = 0.05)::Measurement</code></pre><p>Calculate sample mean estimation and its confidence interval at <code>alpha</code> significance level, e.g. alpha=0.05 for 95% confidence. Return <code>Measurement</code> value.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; sample_mean_est([1,2,3])
2.0 ± 4.3</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L131-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.strip_units!-Tuple{Thermobench.Data}" href="#Thermobench.strip_units!-Tuple{Thermobench.Data}"><code>Thermobench.strip_units!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">strip_units!(d::Data)</code></pre><p>Strip unit names from DataFrame column names.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; d = Thermobench.read(&quot;test.csv&quot;, stripunits=false);


julia&gt; names(d.df)[1:3]
3-element Array{String,1}:
 &quot;time_s&quot;
 &quot;CPU_0_temp_°C&quot;
 &quot;CPU_1_temp_°C&quot;

julia&gt; Thermobench.strip_units!(d)


julia&gt; names(d.df)[1:3]
3-element Array{String,1}:
 &quot;time&quot;
 &quot;CPU_0_temp&quot;
 &quot;CPU_1_temp&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L190-L215">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.thermocam_correct!-Tuple{Thermobench.Data}" href="#Thermobench.thermocam_correct!-Tuple{Thermobench.Data}"><code>Thermobench.thermocam_correct!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">thermocam_correct!(d::Data)</code></pre><p>Estimate correction for thermocamera temperatures and apply it. Return the correction coefficients.</p><p>Correction is calculated from <code>CPU_0_temp</code> and <code>cam_cpu</code> columns. This and the names of modified columns are currently hard coded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L353-L361">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thermobench.@symarray-Tuple" href="#Thermobench.@symarray-Tuple"><code>Thermobench.@symarray</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Construct array of symbols from arguments.</p><p>Useful for constructing column names, e.g.,</p><pre><code class="language-julia-repl">julia&gt; @symarray Cortex_A57_temp Denver2_temp
2-element Array{Symbol,1}:
 :Cortex_A57_temp
 :Denver2_temp</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTU-IIG/thermobench/blob/9d0dbb75f7c04727b7903e8d170393b1ebca1c74/julia/src/Thermobench.jl#L981-L991">source</a></section></article><p>&lt;!– Local Variables: –&gt; &lt;!– eval: (add-hook &#39;after-save-hook &#39;wsh/thermobench.jl-make-doc nil t) –&gt; &lt;!– End: –&gt;</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 23 December 2020 13:53">Wednesday 23 December 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
